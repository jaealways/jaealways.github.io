---
layout: post
title:  "[PAPER with CODE] 공포탐욕지수 수정본"
author: jaealways
categories: [ Fintech, CODE]
tags: [risk, Crypto]
---

본 게시글은 두나무 Datavalue 팀에서 발간한 [디지털자산 공포-탐욕 지수 Methodology Book](https://datavalue.dunamu.com/static/pdf/%EB%91%90%EB%82%98%EB%AC%B4%20%EB%94%94%EC%A7%80%ED%84%B8%EC%9E%90%EC%82%B0%20%EA%B3%B5%ED%8F%AC-%ED%83%90%EC%9A%95%20%EC%A7%80%EC%88%98%20Methodology%20Book%202.0.pdf)을 바탕으로 작성한 내용임을 밝힙니다.

 
코드 보기: https://github.com/jaealways/fear-and-greed


공포탐욕지수 설명: https://jaealways.tistory.com/97?category=987531 



 
## 1. Introduction

두나무 데이터밸류 팀의 공포탐욕지수는 그 자체로 완성도가 높은 모델이지만, 크립토 시장이 아닌 자본시장에 적용하는데는 다음과 같은 한계를 가졌습니다.


### 1.1. 시장유동성 부족

하루 유가증권시장에 맞먹는 거래량이 일어나는 크립토 시장과 달리, 음악저작권 시장이나 코넥스 같은 유동성이 극히 낮은 시장에선 공포탐욕지수를 그대로 적용하기 어려웠습니다. 개별종목 거래량이 0인 경우엔 로그 함수 연산을 위해 별도의 보정이 필요하기도 했고, 고가/저가와 종가의 격차가 극도로 심한 경우엔, 이를 변동성에 반영하지 못하는 한계점이 있었습니다.



### 1.2. 합의된 컨센서스 부족

공포탐욕지수의 C 파라미터의 경우, 개발자가 상황에 따라 정도를 조절하는 하이퍼파리미터입니다. 이에 두나무 데이터밸류 팀에선 특정 시점의 공포탐욕지수가 어느 정도 수치에 맞도록 이를 조절했습니다. 다만, 이는 이미 시장에서 충분히 상대적 저점 고점에 대한 컨센서스가 충분히 있었기에 가능했습니다. 반면, 신규자본시장이나 참여자가 충분치 않은 시장의 경우, 몇몇 파라미터에 대한 기준을 가늠하기 힘들다는 한계점이 있었습니다.


이와 같은 점들을 아래의 방법으로 해결했습니다.


## 2. 거래량 0


음악저작권 자산은 거래량이 0인 구간이 존재했는데, 특히 로그 거래량 비율을 계산해야 하는 거래량점수 부분에서 문제가 됬습니다. 

![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/c19768a0-45fc-4346-ac31-7bcc5792a7b0)

ln0 = -inf이므로,  자체적으로 설정한 거래량 점수의 하한값인 -4정도의 값이 나오도록, 0을 0.018로 변환했습니다.


 
## 3. 파라미터 C
 
 
C 파리미터는 공포탐욕지수의 분포를 0~100 사이 극단에 얼마나 위치시킬지 조절하는 파라미터입니다. 숫자가 클수록, 양 극단값에 몰리는 경향이 있습니다.


![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/9220c83e-2f7c-4901-9dfb-79dc84b0306d)

![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/d128d584-48c3-4c9b-a3fe-720b327f4470)


![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/efaa4178-6b2b-4cd8-a027-dd3ba8db0dd3)


위 다섯 개의 그래프는 각각 종가, 거래량, C = 5, 12, 20일 때 공포탐욕지수 데이터를 나타냅니다. 그림처럼 서로 다른 경향의 여러 자산을 비교한 결과, 변동성이 심할 땐 높은 C를, 변동성이 낮을 땐 낮은 C 파라미터를 사용하는게 적절해보입니다. 이는 자산이 높은 변동성을 보이는 경우 훨씬 더 위험하니, 공탐지수를 양 극단 값에 더 허용해주고, 이것이 본래 취지와 잘 맞는다 생각했습니다. 
 
 
C 파라미터를 여러번 변동하여 관측한 결과, 5~20 사이의 값이 적절했습니다. 이에 특정 시계열 구간 (지수는 365일 종목은 120일) 동안, 극심한 변동성의 상황에선 20, 변동성이 거의 없는 상황에선 5에 수렴하도록 했고, 식은 아래와 같습니다.

![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/f2e92a9a-c698-47c0-b0b6-4bd162291711)

![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/e2f1e42d-9d7a-4464-ad90-33b5db33ec34)


C는 365일의 normalized 가격데이터와 normalized 거래량데이터의 평균입니다.
C'은 C를 5~20 사이로 보정한 값으로, C와 C'의 관계는 아래와 같습니다. 


![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/e244cb42-8d46-40c5-9acb-5aaecc3cd766)

C와 C'의 관계


![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/fcc1a484-735d-4b0a-97ca-c42408167f3e)


C파라미터의 변화

![image](https://github.com/jaealways/must-read-paper-CV-daily/assets/71856506/451a6d1a-f421-454e-a294-0884a46a176f)


위의 두 그래프는 차례대로 가격, 거래량, C'파라미터의 변화, 공포탐욕지수를 나타냅니다.
거래량과 가격변동성이 급증할 때는 C파라미터가 높은 값이었다가, 잠잠해지면서 다시 낮은 값을 기록하는 것을 확인할 수 있습니다.

